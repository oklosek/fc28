<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8"/>
  <title>FarmCare - Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="/static/styles.css"/>
</head>
<body>
  <header>
    <div>
      <h1>FarmCare 2.0 - Dashboard</h1>
      <p id="modeIndicator">Mode: --</p>
      <button id="modeBtn">Toggle mode</button>
    </div>
    <div class="admin-tools">
      <label>Admin token
        <input type="password" id="tokenInput" placeholder="x-admin-token"/>
      </label>
      <button id="saveTokenBtn">Save token</button>
      <span id="tokenStatus" class="info"></span>
    </div>
  </header>

  <section id="message" class="hidden"></section>

  <section id="updateSection" class="hidden">
    <div class="update-header">
      <h2>Aktualizacja systemu</h2>
      <span id="updateBadge" class="update-available-badge hidden">Nowa wersja</span>
    </div>
    <p id="updateInfo">Aktualny stan aktualizacji nie jest jeszcze dostępny.</p>
    <p id="updateNotes" class="muted hidden"></p>
    <p id="updateMeta" class="update-meta"></p>
    <p id="updateError" class="update-error hidden"></p>
    <div class="update-actions">
      <button id="checkUpdateBtn" type="button" class="secondary">Sprawdź teraz</button>
      <button id="runUpdateBtn" type="button" class="primary">Zainstaluj aktualizację</button>
    </div>
  </section>

  <section id="sensors">
    <h2>Current readings</h2>
    <div class="cards" id="sensorCards"></div>
  </section>

  <section id="configSummary">
    <h2>Controller targets</h2>
    <div class="cards" id="configCards"></div>
  </section>

  <section id="vents">
    <h2>Manual vent control</h2>
    <div class="control-block">
      <label>All vents</label>
      <div class="slider-row">
        <input type="range" id="allRange" min="0" max="100" value="0"/>
        <span id="allVal" class="target">cel: 0%</span>
        <span id="allActual" class="actual">aktualnie: 0%</span>
      </div>
      <div class="bulk-actions">
        <button type="button" id="openAllBtn">OTWÓRZ WSZYSTKO</button>
        <button type="button" id="closeAllBtn">ZAMKNIJ WSZYSTKO</button>
      </div>
    </div>
    <div id="groupList" class="group-list"></div>
    <div id="ventList" class="vent-list"></div>
  </section>

  <section id="history">
    <h2>Sensor history</h2>
    <div class="history-controls">
      <label>Entries
        <input type="number" id="historyLimit" min="10" max="500" step="10" value="100"/>
      </label>
      <button id="refreshHistoryBtn">Refresh</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>Sensor</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody id="historyBody"></tbody>
    </table>
  </section>

  <section id="controlSettings">
    <h2>Adjust controller</h2>
    <form id="controlForm">
      <div class="form-grid" id="controlFields"></div>
      <button type="submit">Save changes</button>
      <span id="controlStatus" class="info"></span>
    </form>
  </section>

  <script src="/static/farmcare.js"></script>
</body>
</html>
